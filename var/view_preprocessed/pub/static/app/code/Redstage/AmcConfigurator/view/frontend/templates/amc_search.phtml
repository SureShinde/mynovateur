<?php /** @var \Redstage\AmcConfigurator\Block\Template $block */ $renewalAmcCollection = $block->getRenewalAmc(); $amcOffers = array("0"=>"abc","1"=>"ABC","2"=>"Abc","3"=>"aBC"); ?> <?php if(count($renewalAmcCollection)>0){ foreach ($renewalAmcCollection as $renewalAmc) {?> <?php ?> <div class="list_container"><div data-role="trigger" class="title"><div data-role="collapsible" class="collapsible"><?=$renewalAmc['asset_name'];?></div></div><div data-role="content" class="content"><div class="product_details inner-section"><h3>Product Details:</h3><table><tr><td width="33%"><div class="product_title">Sales Organization</div><div class="product_desc"><?=$renewalAmc['sales_org'];?></div></td><td width="40%"><div class="product_title">Account Name</div><div class="product_desc"><?=$renewalAmc['sold_to_account_name'];?></div></td><td width="25%"><div class="product_title">Warranty Date</div><?php if (isset($renewalAmc['warranty_start_date']) && !empty($renewalAmc['warranty_start_date'])) {?> <div class="product_desc"><?= date('d/m/Y', strtotime($renewalAmc['warranty_start_date'])) . " - " . date('d/m/Y', strtotime($renewalAmc['warranty_end_date'])); ?></div><?php } else { echo "NA"; } ?></td></tr><tr><td width="33%"><div class="product_title">Product Material Group</div><div class="product_desc"><?=$renewalAmc['product_meterial_group_1'];?></div></td><td width="33%"><div class="product_title">Location</div><div class="product_desc"><?=$renewalAmc['account_billing_street'];?></div></td><td width="33%"><div class="product_title">AMC Date</div><?php if (isset($renewalAmc['amc_start_date']) && !empty($renewalAmc['amc_start_date'])) {?> <div class="product_desc"><?=date('d/m/Y', strtotime($renewalAmc['amc_start_date'])) . " - " . date('d/m/Y', strtotime($renewalAmc['amc_end_date']));?></div><?php } else { echo "NA"; } ?></td></tr><tr><td width="33%"><div class="product_title">Asset Name</div><div class="product_desc"><?=$renewalAmc['asset_name'];?></div></td><td width="33%"><div class="product_title">City</div><div class="product_desc"><?=$renewalAmc['account_city1'];?></div></td><td width="33%"></td></tr></table><hr class="dotted"><div><div class="package-heading"><strong>Choose Your Preferable Package <span class="tooltip amshopby-filter-tooltip" title="lorem ipsum"></strong> <a href="<?php echo $this->getUrl('terms-and-conditions');?>" target="_blank" >Terms & Conditions Apply</a></div><section class="amc-slider"><?php $i=0; foreach ($amcOffers as $key => $value) { ?> <div class="offerItems"><div class="packages"><h4 class="year"><?php echo ($i == 0)? "1":$i; ?> YEAR PACKAGE</h4><div class="term"><p class="amc-term">AMC Term</p><!-- <p class="date">07/01/2022-07/01/2023</p> --><p class="date"><?php if (isset($renewalAmc['warranty_end_date']) && !empty($renewalAmc['warranty_end_date'])) { $offerStartDate = date('d/m/Y', strtotime("1 day", strtotime($renewalAmc['warranty_end_date']))); $offerEndDate = date('d/m/Y', strtotime("+$i years +1 day", strtotime($renewalAmc['warranty_end_date']))); ?> <?= $offerStartDate . " - " . $offerEndDate ?> <?php } ?></p></div><ul><li>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</li> <li>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</li> <li>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</li></ul><div class="price"><?= $block->getCurrencySymbol(25000) ?></div><button class="addToCartButton">ADD TO CART</button></div></div><?php $i= $i + 5; } ?></section></div></div></div></div><?php ?> <?php }?> <?php }else{?> <form class="enquiry-form" id="enquiry-form" data-mage-init='{"validation":{}}'><div class="contact"><div class="info"><p>Sorry! we could not find your asset match,</p><p>kindly fill in the below form information to get support</p></div><div class="fields"><div class="user-name"><label> Contact Name<span>*</span></label> <input type="text" name="userName" id="userName" required="true"></div><div class="field-wrapper"><div class="user-mobile-wrapper"><label>Mobile<span>*</span></label> <input type="number" name="userMob" id="userMob" required="true"><span class="unit">+91 <span>|</span></span></div><div class="email-wrapper"><label>Email<span>*</span></label> <input type="email" name="userEmail" id="userEmail" required="true"></div></div><button type="button" class="enquiry-bttn action primary"> Submit Enquiry</button></div><div id="mail-status"></div></div></form><?php }?> <script type="text/javascript">
    require([
        'jquery'
    ], function ($) {
        $('.enquiry-bttn').on('click', function(){            
            jQuery.ajax({
                url: "<?php echo $this->getUrl().'amcconfigurator/amclist/sendmail'?>",
                data:'userName='+$("#userName").val()+'&userEmail='+
                $("#userEmail").val()+'&userMob='+
                $("#userMob").val(),
                type: "POST",
                showLoader: true,
                success:function(data){
                    $('body').trigger('processStop');
                    $("#mail-status").html(data);
                    $("#userName").val('');
                     $("#userEmail").val('');
                     $("#userMob").val('');
                },
                error:function (){
                    $('body').trigger('processStop');
                }
            });
        });
    });</script>